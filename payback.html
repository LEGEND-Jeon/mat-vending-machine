
<script>
function cancelKpay(tid, cancelAmount, taxFree) {
    var httpHeaders = new Headers();
    httpHeaders.append("Content-Type", "application/x-www-form-urlencoded");
    httpHeaders.append("Authorization", "KakaoAK fdbbebcde83394e6c92f404294dcfe30");

    var formData = new FormData();
    formData.append("cid", "TC0ONETIME");
    formData.append("cancel_amount", 5000);
    formData.append("partner_user_id", "user");
    formData.append("tid", "T2");
    formData.append("cancel_tax_free_amount", 0);

    fetch("https://kapi.kakao.com/v1/payment/cancel", {
        method: "POST",
        headers: httpHeaders,
        body: formData
    })
    .then(function(response) {
        return response.json();
    })
    .then(function(data) {
        console.log("통신 결과: " + JSON.stringify(data));
        // 여기에서 결과를 처리하거나 페이지를 업데이트할 수 있습니다.
        return true;
    })
    .catch(function(error) {
        console.error("환불 실패 사유: " + error.message);
        return false;
    });
}
       
    </script>
