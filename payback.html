<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>KakaoPay 결제 취소</title>
</head>
<body>
    <button id="cancelButton">결제 취소</button>

    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>

    <script>
        // 클라이언트에서 결제 취소 요청 보내는 함수
        const requestCancel = async () => {
            try {
                // 결제 고유 번호 및 취소할 금액을 설정
                //const tid = "order_no_0004";
                //const cancel_amount = 5000; // 환불할 금액
                
                // KakaoPay API 키 및 취소 요청 정보 설정
                const apiKey = 'fdbbebcde83394e6c92f404294dcfe30';
                const cancelData = {
                    cid: "kakaopay.TC0ONETIME",
                    tid: "T1234567890123456789",
                    cancel_amount: 5000,
                    cancel_tax_free_amount: 0, // 비과세 금액
                    cancel_vat_amount: 0, // 부가세 금액
                };
                
                // 결제 취소 요청 보내기
                const response = await axios.post('https://kapi.kakao.com/v1/payment/cancel', cancelData, {
                    headers: {
                        'Authorization': `KakaoAK ${apiKey}`
                    }
                });
                
                const data = response.data;
                console.log(data);
                
                // 취소 요청 결과 처리
                if (data.status === 'CANCELED') {
                    console.log('결제가 취소되었습니다.');
                } else {
                    console.error('결제 취소에 실패했습니다.');
                }
            } catch (error) {
                console.error(error);
            }
        };

        // 버튼 클릭 시 결제 취소 요청 보내기
        document.getElementById('cancelButton').addEventListener('click', requestCancel);
    </script>
</body>
</html>

