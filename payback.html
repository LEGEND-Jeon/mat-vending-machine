<script type="text/javascript" src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
<script type="text/javascript" src="https://service.iamport.kr/js/iamport.payment-1.1.5.js"></script>

<html>
<head>
  <center>
    <br>
    <br>
    <br>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
<form method="post" action="https://kapi.kakao.com/v1/payment/cancel">
</form>
 </button>
 </center>

<script>

        var IMP = window.IMP; // 생략가능
        IMP.init('imp43035337');
        // i'mport 관리자 페이지 -> 내정보 -> 가맹점식별코드
        // ''안에 띄어쓰기 없이 가맹점 식별코드를 붙여넣어주세요. 안그러면 결제창이 안뜹니다.
        IMP.request_pay({
              pg: "kakaopay.TC0ONETIME",
              merchant_uid: "order_no_0002", // 상점에서 생성한 고유 주문번호
              name: "돗자리 대여",
              cancel_amount: 5000,
              buyer_name: "user_",
              cancel_tax_free_amount=0
            }, function (rsp) {
            console.log(rsp);
            if (rsp.success) {
                var msg = '환불이 완료되었습니다.';
                msg += '환불 금액 : ' + rsp.cancel_amount;
                // success.submit();
                document.getElementById('payment_form').submit();
                // 결제 성공 시 정보를 넘겨줘야한다면 body에 form을 만든 뒤 위의 코드를 사용하는 방법이 있습니다.
                // 자세한 설명은 구글링으로 보시는게 좋습니다.
               window.location.href = 'Complete_payment.html';
            } else {
                var msg = '환불에 실패하였습니다.';
                msg += '에러내용 : ' + rsp.error_msg;
            }
            alert(msg);
        });
</script>
</body>
</html>
