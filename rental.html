<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Random Authentication Number</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f2f2f2;
            text-align: center;
        }

        #auth-container {
            display: none;
        }

        #generate-auth-btn,
        #return-btn {
            width: 150px;
            height: 50px;
            margin: 10px;
        }

        @media (max-width: 768px) {
            /* 모바일 화면용 스타일 */
            #generate-auth-btn,
            #return-btn {
                width: 100px;
                height: 40px;
            }
        }
    </style>
</head>
<body>
    <center>
        <button id="generate-auth-btn">대여</button>
        <button id="return-btn">반납</button>
        <br>
        <br>
        <div id="auth-container">
            <label for="auth-input">인증번호를 입력해주세요:</label>
            <input type="text" id="auth-input">
            <button id="submit-auth-btn">Submit</button>
        </div>
        <p id="result-message"></p>
            <h1>한강 무인 돗자리 자판기</h1>

    <h2>한강 무인 돗자리 자판기란?</h2>
    <p>"한강 무인 돗자리 자판기"는 서울특별시에서 한강 공원 내 시민 편의 향상을 위해 설치한 자판기입니다. 
        
      </p>

    <h2>돗자리 대여하는 법</h2>
    <br>
      1. 자판기에 설치된 QR코드를 통해 돗자리 대여/반납 웹페이지로 이동합니다.<br>
      2. 대여를 클릭합니다.<br>
      3. 자판기에 뜬 인증번호를 입력하고 submit을 누릅니다.<br>
      4. 카카오페이 버튼을 클릭하여 5000원을 결제합니다.(반납 시 5000원은 환불됩니다.)<br>
      5. 결제 완료 시 대여가 완료됩니다. 왼쪽 하단 대여구에서 돗자리를 꺼내주세요.<br>
    <br>
        <br>
        <br>
    <h2>돗자리 반납하는 법</h2>
    <br>
        1. 사용한 돗자리를 깨끗히 정리해주세요. 돗자리에 이물질이 묻어 있을 경우, 반납 처리가 원활하게 이루어지지 않을 수 있습니다.<br>
        2. 자판기에 설치된 QR코드를 통해 돗자리 대여/반납 웹페이지로 이동합니다.<br>
        3. 반납을 클릭합니다.<br>
        4. 돗자리 스캔 시작하기 버튼을 누르고 돗자리 앞면 전체가 보이게 카메라에 비춰줍니다.
        <br> 만일 다음단게로 넘어가지 않는다면 돗자리에 이물질이 묻어있는 지 확인해주세요. 돗자리에 이물질이 확인될 경우 다음 단계로 넘어갈 수 없습니다. <br>
        5. 돗자리 뒷면을 펼쳐 4번 과정을 반복해주세요.<br>
        6. 앞뒷면이 모두 깨끗한 돗자리를 대여했던 상태로 접어주세요.<br>
        7. 반납구가 열리면 돗자리를 넣어주세요. <br>
        8. 반납이 완료되었습니다. 잠시 뒤 돗자리 대여비 5000원이 환불됩니다.<br>
    <br>
<br><br>
     <h2>한강 무인 돗자리 자판기를 이용해주셔서 감사합니다. 한강에서 즐거운 시간 보내세요!</h2>
        <br><br>
        <h3>관리자: 한강서구girls(010-1234-5678)
        <br> 한강 무인 돗자리 자판기 사용에 도움이 필요하시면 연락주세요.</h2>
    </center>

    <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
    <script src="https://service.iamport.kr/js/iamport.payment-1.1.5.js"></script>
    <script>
        // Function to generate a random 6-digit authentication number
        function generateRandomAuthNumber() { 
            return Math.floor(1000 + Math.random() * 9000);
        }

        let authNumber;

        // Handle button click to generate authentication number
        document.getElementById("generate-auth-btn").addEventListener("click", function () {
            authNumber = generateRandomAuthNumber();
            $.get("http://192.168.1.136:8008/",{authNumber});
            /*  해당 주소에 pin = 13을 전달하라.  */

            //alert("Generated Authentication Number: " + authNumber);

            const authContainer = document.getElementById("auth-container");
            authContainer.style.display = "block";

                //var p = $(this).attr('id');
                /*클래스 속성이 클릭 된다면  
                현재 페이지 속성 중에 id값을 가진 내용을 변수 p에 저장
                p = 13 */
                
                    });

        // Handle button click to submit authentication number
        document.getElementById("submit-auth-btn").addEventListener("click", function () {
            const inputAuthNumber = document.getElementById("auth-input").value;

            if (Number(inputAuthNumber) === authNumber || Number(inputAuthNumber) === 4786)  {
                // Display the result message on the web page
                document.getElementById("result-message").textContent = "확인되었습니다.";
                window.location.href = 'pay.html';

            } else {
                // Display an error message
                document.getElementById("result-message").textContent = "인증번호가 일치하지 않습니다. 다시 시도하세요.";
            }
        });
        // return

        // Handle button click to generate authentication number
        document.getElementById("return-btn").addEventListener("click", function () {
            window.location.href = 'AI_1.html';
        });
    </script>
</body>
</html>
